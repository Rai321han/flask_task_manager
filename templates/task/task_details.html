{% extends "task/base.html" %}
{% block title %}Task Details{% endblock %}

{% block content %}
<div class="detail-card">

    <h2 class="detail-title">{{ task.title }}</h2>

    <div class="detail-meta">
        <span class="badge {{ task.status.value }}">
            {{ task.status.value.replace("_", " ") }}
        </span>
        <span class="dot">•</span>
        <span class="muted">
            Created {{ task.created_at.strftime("%b %d, %Y") }}
        </span>
    </div>

    {% if task.description %}
    <p class="detail-description">
        {{ task.description }}
    </p>
    {% endif %}

    <div class="detail-info">
        <div>
            <span class="label">Due date</span>
            <span>{{ task.due_date if task.due_date else "No deadline" }}</span>
        </div>
    </div>

    <!-- STATUS UPDATE -->
    <form method="post" action="/tasks/{{ task.id }}/status" class="status-form">
        <label class="label">Task status</label>
        <select name="status">
            {% for s in ["todo", "in_progress", "done"] %}
            <option value="{{ s }}" {% if task.status.value==s %}selected{% endif %}>
                {{ s.replace("_", " ") }}
            </option>
            {% endfor %}
        </select>

        <button type="submit">Update Status</button>
    </form>

    <a href="/tasks" class="back-link">← Back to tasks</a>

</div>
{% endblock %}